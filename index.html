<!DOCTYPE html>
<html lang="en"
      xmlns:v-on="http://www.w3.org/1999/xhtml"
      xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>VueJS</title>
    <script src="vue.js"></script>
    <style>
        body {
            font-family: 'Franklin Gothic Light', 'Arial Narrow', Arial, sans-serif;
        }

        #effect {
            width: 100px;
            height: 100px;
            border: 1px solid black;
        }

        div {
            margin: 1em 0;
        }

        .highlight {
            background-color: red;
            width: 200px !important;
        }

        .shrink {
            background-color: gray;
            width: 50px !important;
        }

        .italics {
            font-style: italic;
        }

        .boldface {
            font-weight: bold;
        }
    </style>
</head>
<body>
<div id="exercise">
    <!-- 1) Start the Effect with the Button. The Effect should alternate the "highlight" or "shrink" class on each new setInterval tick (attach respective class to the div with id "effect" below) -->
    <div>
        <button @click="startEffect">{{ effectTimerId ? "Stop" : "Start" }} Effect</button>
        <div id="effect" :class="{highlight: effectClassToggler, shrink: !effectClassToggler}"></div>
    </div>
    <!-- 2) Create a couple of CSS classes and attach them via the array syntax -->
    <div :class="['italics', 'boldface']">I got no class :(</div>
    <!-- 3) Let the user enter a class (create some example classes) and attach it -->
    <div>
        <input type="text" v-model="userEnteredClass">
        <div :class="userEnteredClass">The quick brown fox jumps over the lazy dog's head.</div>
    </div>
    <!-- 4) Let the user enter a class and enter true/ false for another class (create some example classes) and attach the classes -->
    <div>
        <input type="text" v-model="class4input">
        <label><input type="checkbox" v-model="class4toggleInput"> boldface</label>
        <div :class="class4">The quick brown fox jumps over the lazy dog's head.</div>
    </div>
    <!-- 5) Repeat 3) but now with values for styles (instead of class names). Attach the respective styles.  -->
    <div>
        <input type="text" v-model="styleInput">
        <div :style="styleInput">The quick brown fox jumps over the lazy dog's head.</div>
    </div>
    <!-- 6) Create a simple progress bar with setInterval and style bindings. Start it by hitting the below button. -->
    <div>
        <button :disabled="progressTimerId" @click="startProgress">Start Progress</button>
        <button :disabled="!progressTimerId" @click="stopProgress">Stop Progress</button>
        <button @click="progress = 0">Reset</button>
        <div :style="progressStyle"></div>
    </div>
</div>
<script>
    var app = new Vue({
        el: '#exercise',
        data: {
            effectClassToggler: false,
            userEnteredClass: "",
            effectTimerId: null,

            class4input: "",
            class4toggleInput: false,

            styleInput: "",

            progress: 0,
            progressUpperBound: 60*4,
            progressTimerId: null
        },
        methods: {
            startEffect: function () {
                if (this.effectTimerId) {
                    window.clearInterval(this.effectTimerId);
                    this.effectTimerId = null;
                } else {
                    this.effectTimerId = window.setInterval(() => {
                        this.effectClassToggler = !this.effectClassToggler;
                    }, 1000);
                }
            },
            startProgress() {
                if (!this.progressTimerId) {
                    // this.progress = 0;
                    this.progressTimerId = window.setInterval(() => {
                        if (this.progress >= this.progressUpperBound) {
                            this.stopProgress();
                        } else { this.progress++; }
                    }, 1000 / 60);
                }
            },
            stopProgress() {
                if (this.progressTimerId) {
                    window.clearInterval(this.progressTimerId);
                    this.progressTimerId = null;
                }
            }
        },
        computed: {
            class4() {
                var classes = [this.class4input];
                if (this.class4toggleInput) {
                    classes.push("boldface")
                }
                return classes.filter(f => !!f);
            },
            progressStyle() {
                return {
                    backgroundColor: 'orange',
                    width: `${this.progress/4}em`,
                    height: '1em'
                };
            }
        }
    });
</script>
</body>
</html>